import{_ as x,c as n,o as a,a as t,b as M,d as H,t as u,n as r,w as I,r as c,e as K,F as $,f as B,g as p,h as g,i as N,j as S,v as D,k as L,u as T,l as y,m as F}from"./index-Bw86Jh8l.js";import{s as Z}from"./api-DS5VUnfc.js";const q={class:"book-cover"},z={key:0,class:"status-badge"},E={class:"book-info"},O=["title"],Q=["title"],R={class:"book-category"},U={class:"book-code"},A={class:"book-status"},G={class:"book-actions"},J={key:1,class:"action-button disabled",disabled:""},P={__name:"BookCard",props:{book:{type:Object,required:!0,default:()=>({id:"",code:"",title:"",author:"",category:null,status:"available"})}},emits:["click","borrow"],setup(s,{emit:C}){return(v,i)=>{var d;return a(),n("div",{class:r(["book-card",{"book-borrowed":s.book.status==="borrowed"}]),onClick:i[1]||(i[1]=k=>v.$emit("click")),"\\u003e":"","<!--":"",图书封面占位区:"","--":""},[t("div",q,[i[2]||(i[2]=M('<div class="book-icon" data-v-4eff13be><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4eff13be><path d="M9 7H39C40.6569 7 42 8.34315 42 10V38C42 39.6569 40.6569 41 39 41H9C7.34315 41 6 39.6569 6 38V10C6 8.34315 7.34315 7 9 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path><path d="M36 7V41" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path><path d="M12 15H36" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path><path d="M12 21H36" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path><path d="M12 27H30" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path><path d="M12 33H24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-4eff13be></path></svg></div>',1)),s.book.status==="borrowed"?(a(),n("div",z," 已借出 ")):H("",!0)]),t("div",E,[t("h3",{class:"book-title",title:s.book.title},u(s.book.title),9,O),t("p",{class:"book-author",title:s.book.author},u(s.book.author),9,Q),t("p",R,u(((d=s.book.category)==null?void 0:d.name)||"未分类"),1),t("p",U,"编码: "+u(s.book.code),1),t("div",A,[t("span",{class:r(["status-indicator",s.book.status])},u(s.book.status==="available"?"可借阅":"已借出"),3)])]),t("div",G,[s.book.status==="available"?(a(),n("button",{key:0,class:"action-button primary",onClick:i[0]||(i[0]=I(k=>v.$emit("borrow"),["stop"]))}," 立即借阅 ")):(a(),n("button",J," 已被借出 "))])],2)}}},W=x(P,[["__scopeId","data-v-4eff13be"]]),X={class:"book-list-container"},Y={class:"main-content"},tt={class:"category-sidebar"},et={class:"category-list"},ot=["onClick"],st={class:"sidebar-actions"},at={class:"content-area"},nt={class:"search-section"},it={class:"search-bar"},lt={class:"search-filters"},rt={class:"books-section"},dt={key:0,class:"loading-state"},ct={key:1,class:"empty-state"},ut={key:2,class:"books-grid"},kt={__name:"BookList",setup(s){const C=T(),v=c([{id:1,name:"文学小说"},{id:2,name:"历史传记"},{id:3,name:"科学技术"},{id:4,name:"经济管理"},{id:5,name:"生活休闲"}]),i=c([{id:1,code:"BK001",title:"活着",author:"余华",categoryId:1,category:{name:"文学小说"},status:"available"},{id:2,code:"BK002",title:"百年孤独",author:"加西亚·马尔克斯",categoryId:1,category:{name:"文学小说"},status:"available"},{id:3,code:"BK003",title:"人类简史",author:"尤瓦尔·赫拉利",categoryId:3,category:{name:"科学技术"},status:"borrowed"},{id:4,code:"BK004",title:"围城",author:"钱钟书",categoryId:1,category:{name:"文学小说"},status:"available"},{id:5,code:"BK005",title:"原则",author:"雷·达里奥",categoryId:4,category:{name:"经济管理"},status:"available"},{id:6,code:"BK006",title:"三体",author:"刘慈欣",categoryId:3,category:{name:"科学技术"},status:"available"}]),d=c(""),k=c(null),b=c(null),h=c(!1),w=l=>{k.value=l},f=l=>{b.value=l},_=async()=>{try{h.value=!0;const l=await Z(d.value);i.value=l}catch(l){console.error("搜索图书失败:",l),console.error("搜索失败，请重试")}finally{h.value=!1}},V=l=>{C.push(`/book/${l}`)};return K(()=>{console.log("图书列表页面已加载")}),(l,e)=>{const m=N("router-link");return a(),n("div",X,[t("div",Y,[t("aside",tt,[e[8]||(e[8]=t("h3",{class:"sidebar-title"},"图书分类",-1)),t("ul",et,[t("li",{class:r(["category-item",{active:k.value===null}]),onClick:e[0]||(e[0]=o=>w(null))}," 全部图书 ",2),(a(!0),n($,null,B(v.value,o=>(a(),n("li",{key:o.id,class:r(["category-item",{active:k.value===o.id}]),onClick:j=>w(o.id)},u(o.name),11,ot))),128))]),t("div",st,[p(m,{to:"/manage",class:"action-btn"},{default:g(()=>[...e[5]||(e[5]=[y(" 图书管理 ",-1)])]),_:1}),p(m,{to:"/return",class:"action-btn return-btn"},{default:g(()=>[...e[6]||(e[6]=[y(" 归还图书 ",-1)])]),_:1}),p(m,{to:"/records",class:"action-btn records-btn"},{default:g(()=>[...e[7]||(e[7]=[y(" 借阅记录 ",-1)])]),_:1})])]),t("section",at,[t("div",nt,[t("div",it,[S(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),class:"search-input",placeholder:"搜索书名、作者或图书编码...",onKeyup:L(_,["enter"])},null,544),[[D,d.value]]),t("button",{class:"search-btn",onClick:_}," 搜索 ")]),t("div",lt,[t("button",{class:r(["filter-btn",{active:b.value===null}]),onClick:e[2]||(e[2]=o=>f(null))}," 全部状态 ",2),t("button",{class:r(["filter-btn available",{active:b.value==="available"}]),onClick:e[3]||(e[3]=o=>f("available"))}," 可借阅 ",2),t("button",{class:r(["filter-btn borrowed",{active:b.value==="borrowed"}]),onClick:e[4]||(e[4]=o=>f("borrowed"))}," 已借出 ",2)])]),t("div",rt,[h.value?(a(),n("div",dt,[...e[9]||(e[9]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"加载中...",-1)])])):i.value.length===0?(a(),n("div",ct,[...e[10]||(e[10]=[M('<div class="empty-icon" data-v-d7f3be5c><svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d7f3be5c><path d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d7f3be5c></path><path d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d7f3be5c></path></svg></div><p class="empty-text" data-v-d7f3be5c>暂无符合条件的图书</p>',2)])])):(a(),n("div",ut,[(a(!0),n($,null,B(i.value,o=>(a(),F(W,{key:o.id,book:o,onClick:j=>V(o.id)},null,8,["book","onClick"]))),128))]))])])])])}}},ht=x(kt,[["__scopeId","data-v-d7f3be5c"]]);export{ht as default};
