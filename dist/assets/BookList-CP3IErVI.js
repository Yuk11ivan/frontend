import{_ as a,c as t,o as e,a as o,b as s,d as l,t as i,n as r,w as c,r as d,e as n,F as u,f as v,g as b,h as k,i as g,j as h,v as y,k as p,u as m,l as w,m as f}from"./index-b4DvcIw6.js";import"./api-CX5TFECn.js";const C={class:"book-cover"},B={key:0,class:"status-badge"},I={class:"book-info"},K=["title"],j=["title"],_={class:"book-category"},H={class:"book-code"},x={class:"book-status"},M={class:"book-actions"},V={key:1,class:"action-button disabled",disabled:""},L=a({__name:"BookCard",props:{book:{type:Object,required:!0,default:()=>({id:"",code:"",title:"",author:"",category:null,status:"available"})}},emits:["click"],setup:(a,{emit:d})=>(d,n)=>{var u;return e(),t("div",{class:r(["book-card",{"book-borrowed":"borrowed"===a.book.status}]),onClick:n[1]||(n[1]=a=>d.$emit("click"))},[o("div",C,[n[2]||(n[2]=s('<div class="book-icon" data-v-c7814ffb><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c7814ffb><path d="M9 7H39C40.6569 7 42 8.34315 42 10V38C42 39.6569 40.6569 41 39 41H9C7.34315 41 6 39.6569 6 38V10C6 8.34315 7.34315 7 9 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path><path d="M36 7V41" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path><path d="M12 15H36" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path><path d="M12 21H36" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path><path d="M12 27H30" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path><path d="M12 33H24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-c7814ffb></path></svg></div>',1)),"borrowed"===a.book.status?(e(),t("div",B," 已借出 ")):l("",!0)]),o("div",I,[o("h3",{class:"book-title",title:a.book.title},i(a.book.title),9,K),o("p",{class:"book-author",title:a.book.author},i(a.book.author),9,j),o("p",_,i((null==(u=a.book.category)?void 0:u.name)||"未分类"),1),o("p",H,"编码: "+i(a.book.code),1),o("div",x,[o("span",{class:r(["status-indicator",a.book.status])},i("available"===a.book.status?"可借阅":"已借出"),3)])]),o("div",M,["available"===a.book.status?(e(),t("button",{key:0,class:"action-button secondary",onClick:n[0]||(n[0]=c(a=>d.$emit("click"),["stop"]))}," 查看详情 ")):(e(),t("button",V," 已被借出 "))])],2)}},[["__scopeId","data-v-c7814ffb"]]),O={class:"book-list-container"},J={class:"main-content"},N={class:"category-sidebar"},S={class:"category-list"},$=["onClick"],Z={class:"sidebar-actions"},q={class:"content-area"},F={class:"search-section"},T={class:"search-bar"},U={class:"search-filters"},z={class:"books-section"},A={key:0,class:"loading-state"},D={key:1,class:"empty-state"},E={key:2,class:"books-grid"},G=a({__name:"BookList",setup(a){const l=m(),c=d([{id:1,name:"文学小说"},{id:2,name:"历史传记"},{id:3,name:"科学技术"},{id:4,name:"经济管理"},{id:5,name:"生活休闲"}]),C=d([{id:1,code:"BK001",title:"活着",author:"余华",categoryId:1,category:{name:"文学小说"},status:"available"},{id:2,code:"BK002",title:"百年孤独",author:"加西亚·马尔克斯",categoryId:1,category:{name:"文学小说"},status:"available"},{id:3,code:"BK003",title:"人类简史",author:"尤瓦尔·赫拉利",categoryId:3,category:{name:"科学技术"},status:"borrowed"},{id:4,code:"BK004",title:"围城",author:"钱钟书",categoryId:1,category:{name:"文学小说"},status:"available"},{id:5,code:"BK005",title:"原则",author:"雷·达里奥",categoryId:4,category:{name:"经济管理"},status:"available"},{id:6,code:"BK006",title:"三体",author:"刘慈欣",categoryId:3,category:{name:"科学技术"},status:"available"},{id:7,code:"BK007",title:"平凡的世界",author:"路遥",categoryId:1,category:{name:"文学小说"},status:"available"},{id:8,code:"BK008",title:"明朝那些事儿",author:"当年明月",categoryId:2,category:{name:"历史传记"},status:"borrowed"},{id:9,code:"BK009",title:"被讨厌的勇气",author:"岸见一郎",categoryId:5,category:{name:"生活休闲"},status:"available"},{id:10,code:"BK010",title:"解忧杂货店",author:"东野圭吾",categoryId:1,category:{name:"文学小说"},status:"available"},{id:11,code:"BK011",title:"未来简史",author:"尤瓦尔·赫拉利",categoryId:3,category:{name:"科学技术"},status:"available"},{id:12,code:"BK012",title:"巴菲特致股东的信",author:"沃伦·巴菲特",categoryId:4,category:{name:"经济管理"},status:"borrowed"},{id:13,code:"BK013",title:"鲁迅全集",author:"鲁迅",categoryId:1,category:{name:"文学小说"},status:"available"},{id:14,code:"BK014",title:"中国近代史",author:"徐中约",categoryId:2,category:{name:"历史传记"},status:"available"},{id:15,code:"BK015",title:"高效能人士的七个习惯",author:"史蒂芬·柯维",categoryId:4,category:{name:"经济管理"},status:"available"},{id:16,code:"BK016",title:"围城",author:"钱钟书",categoryId:1,category:{name:"文学小说"},status:"available"},{id:17,code:"BK017",title:"孙子兵法",author:"孙武",categoryId:4,category:{name:"经济管理"},status:"borrowed"},{id:18,code:"BK018",title:"活着本来单纯",author:"丰子恺",categoryId:5,category:{name:"生活休闲"},status:"available"},{id:19,code:"BK019",title:"时间简史",author:"史蒂芬·霍金",categoryId:3,category:{name:"科学技术"},status:"available"},{id:20,code:"BK020",title:"红楼梦",author:"曹雪芹",categoryId:1,category:{name:"文学小说"},status:"available"}]),B=d(""),I=d(null),K=d(null),j=d(!1),_=a=>{I.value=a,M()},H=a=>{K.value=a,M()},x=async()=>{try{j.value=!0,M()}catch(a){console.error("搜索图书失败:",a),console.error("搜索失败，请重试")}finally{j.value=!1}},M=()=>{j.value=!0,setTimeout(()=>{window.originalBooks||(window.originalBooks=JSON.parse(JSON.stringify(C.value)));let a=JSON.parse(JSON.stringify(window.originalBooks));if(null!==I.value&&(a=a.filter(a=>a.categoryId===I.value)),null!==K.value&&(a=a.filter(a=>a.status===K.value)),B.value.trim()){const t=B.value.toLowerCase().trim();a=a.filter(a=>a.title.toLowerCase().includes(t)||a.author.toLowerCase().includes(t)||a.code.toLowerCase().includes(t))}C.value=a,j.value=!1},300)};return n(()=>{console.log("图书列表页面已加载")}),(a,d)=>{const n=g("router-link");return e(),t("div",O,[o("div",J,[o("aside",N,[d[8]||(d[8]=o("h3",{class:"sidebar-title"},"图书分类",-1)),o("ul",S,[o("li",{class:r(["category-item",{active:null===I.value}]),onClick:d[0]||(d[0]=a=>_(null))}," 全部图书 ",2),(e(!0),t(u,null,v(c.value,a=>(e(),t("li",{key:a.id,class:r(["category-item",{active:I.value===a.id}]),onClick:t=>_(a.id)},i(a.name),11,$))),128))]),o("div",Z,[b(n,{to:"/manage",class:"action-btn"},{default:k(()=>[...d[5]||(d[5]=[w(" 图书管理 ",-1)])]),_:1}),b(n,{to:"/return",class:"action-btn return-btn"},{default:k(()=>[...d[6]||(d[6]=[w(" 归还图书 ",-1)])]),_:1}),b(n,{to:"/records",class:"action-btn records-btn"},{default:k(()=>[...d[7]||(d[7]=[w(" 借阅记录 ",-1)])]),_:1})])]),o("section",q,[o("div",F,[o("div",T,[h(o("input",{type:"text","onUpdate:modelValue":d[1]||(d[1]=a=>B.value=a),class:"search-input",placeholder:"搜索书名、作者或图书编码...",onKeyup:p(x,["enter"])},null,544),[[y,B.value]]),o("button",{class:"search-btn",onClick:x}," 搜索 ")]),o("div",U,[o("button",{class:r(["filter-btn",{active:null===K.value}]),onClick:d[2]||(d[2]=a=>H(null))}," 全部状态 ",2),o("button",{class:r(["filter-btn available",{active:"available"===K.value}]),onClick:d[3]||(d[3]=a=>H("available"))}," 可借阅 ",2),o("button",{class:r(["filter-btn borrowed",{active:"borrowed"===K.value}]),onClick:d[4]||(d[4]=a=>H("borrowed"))}," 已借出 ",2)])]),d[11]||(d[11]=o("div",{class:"section-title"},[o("h2",null,"探索知识海洋，享受阅读乐趣")],-1)),o("div",z,[j.value?(e(),t("div",A,[...d[9]||(d[9]=[o("div",{class:"loading-spinner"},null,-1),o("span",null,"加载中...",-1)])])):0===C.value.length?(e(),t("div",D,[...d[10]||(d[10]=[s('<div class="empty-icon" data-v-ae3617b7><svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ae3617b7><path d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ae3617b7></path><path d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ae3617b7></path></svg></div><p class="empty-text" data-v-ae3617b7>暂无符合条件的图书</p>',2)])])):(e(),t("div",E,[(e(!0),t(u,null,v(C.value,a=>(e(),f(L,{key:a.id,book:a,onClick:t=>{return e=a.id,void l.push(`/book/${e}`);var e}},null,8,["book","onClick"]))),128))]))])])])])}}},[["__scopeId","data-v-ae3617b7"]]);export{G as default};
